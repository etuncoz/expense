@{
    ViewBag.Title = "Payment";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row" data-ng-app="expenseModule" data-ng-controller="paymentExpenseController">
    <div class="jumbotron">
        <div class="row">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th class="col-md-3">Date</th>
                        <th class="col-md-3">Amount</th>
                        <th class="col-md-3">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in expenseItems">
                        <td>{{item.expenseItemDate}}</td>
                        <td>{{item.amount}}</td>
                        <td>{{item.description}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <label ng-cloak>Total Amount : {{ variables.totalAmount }} TL</label><br />
        <div ng-show="!variables.isDecided">
            <button class="btn btn-sm btn-primary" ng-click="payExpense()">Approve</button>
        </div>

    </div>
</div>

@section angular{
    <script type="text/javascript">
    var actionUrls = {
        getExpenseItemByExpenseId: "@Url.RouteUrl("DefaultApi", new { httpRoute = "", controller = "Expenses", action = "GetExpenseItemByExpenseId" })",
        payExpense               : "@Url.RouteUrl("DefaultApi", new { httpRoute = "", controller = "Expenses", action = "PayExpense" })",
        getCurrentExpenseStatus  : "@Url.RouteUrl("DefaultApi", new { httpRoute = "", controller = "Expenses", action = "GetCurrentExpenseStatus" })"
    };
    var currentExpenseId = @Model.ID;
    </script>

    <!-- ANGULARJS -->
    <script src="~/Scripts/angular.js"></script>
    <script src="~/Scripts/angular-route.js"></script>
    <script src="~/Scripts/angular/module/expenseModule.js"></script>
    <script src="~/Scripts/angular/service/expenseService.js"></script>
    <script src="~/Scripts/angular/controller/paymentExpenseController.js"></script>
    <script src="~/Scripts/moment.js"></script>
}